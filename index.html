<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="description" content="If you're dealing with forms in Angular on a regular basis one of the most powerful things you can learn is how to use the Control Value Accessor interface. Learn how to use this interface to solve even the most complicated form problems!">
		<meta name="keywords" content="Jennifer Wadella, software engineer, women in tech speaker, female software engineer, female speaker, female founder, non-profit consultant, female coder, Kansas City Women in Technology, kcwit, kcwit founder, women engineers, girls in tech, women in tech, coding &amp; cocktails, coding &amp; cupcakes, CoderDojoKC">
		<meta itemprop="name" content="Harnessing the Power of the Control Value Accessor for Better Reactive Forms">
		<meta itemprop="description" content="If you're dealing with forms in Angular on a regular basis one of the most powerful things you can learn is how to use the Control Value Accessor interface. Learn how to use this interface to solve even the most complicated form problems!">
		<meta itemprop="image" content="http://tehfedaykin.github.io/BetterAngularReactiveForms/img/cover.png">
		<meta property="og:title" content="Harnessing the Power of the Control Value Accessor for Better Reactive Forms">
		<meta property="og:type" content="website">
		<meta property="og:image" content="http://tehfedaykin.github.io/BetterAngularReactiveForms/img/cover.png">
		<meta property="og:url" content="http://tehfedaykin.github.io/BetterAngularReactiveForms">
		<meta property="og:description" content="If you're dealing with forms in Angular on a regular basis one of the most powerful things you can learn is how to use the Control Value Accessor interface. Learn how to use this interface to solve even the most complicated form problems!">
		<meta property="twitter:card" content="summary">
		<meta property="twitter:title" content="Harnessing the Power of the Control Value Accessor for Better Reactive Forms">
		<meta property="twitter:creator" content="@likeOMGitsFEDAY">
		<meta property="twitter:image" content="http://tehfedaykin.github.io/BetterAngularReactiveForms/img/cover.png">
		<meta property="twitter:url" content="http://tehfedaykin.github.io/BetterAngularReactiveForms">
		<meta property="twitter:description" content="If you're dealing with forms in Angular on a regular basis one of the most powerful things you can learn is how to use the Control Value Accessor interface. Learn how to use this interface to solve even the most complicated form problems!">

		<title>Harnessing the Power of the Control Value Accessor for Better Reactive Forms</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/monstera-dark.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section id="title">
					<h1><span class="small">Harnessing the Power of the</span>
						<br />Control Value Accessor 
						<br /><span class="small">for Better Reactive Forms</span>
					</h1>
					<h3 class="small">Jennifer Wadella</h3>
				</section>
				<section id="me">
					<div class="speaker-title">
						<div class="flex-1">
							<img class="circle plain" src="img/jennifer-wadella-headshot.jpeg" alt="Jennifer Wadella headshot">
						</div>
						<div class="flex-2">
							<div class="">
								<h2>Jennifer Wadella</h2>
								<h3><a href="http://twitter.com/likeOMGitsFEDAY">@likeOMGitsFEDAY</a></h3>
							</div>
						</div>
					</div>
					<ul class="small">
						<li>JavaScript Developer at Bitovi</li>
						<li>Community Organizer</li>
						<li>Kombucha brewin' crazy plant lady</li>
					</ul>
				</section>
				<!----------------------------------------->
				<!----------------------------------------->
				<section id="CVA">
				<h2>The Control Value Accessor</h2>
				</section>
				<section id="CVA-definition">
					<h3>Defines an interface that acts as a bridge between the Angular forms API and a native element in the DOM.</h3>
					<p class="small"><a target="_blank" href="https://github.com/angular/angular/blob/master/packages/forms/src/directives/control_value_accessor.ts">cva source code</a></p>
				</section>
				<section id="implement-CVA">
					<h2>What can we do with this?</h2>
					<p class="fragment">We can implement this interface to create custom form <br />
						control directives that integrate with Angular forms.</p>
				</section>
				<!----------------------------------------->
				<section id="app-gif">
					<h2>Let's build an app!</h2>
					<img class="plain" src="img/galaxyrating-lg.gif" />
				</section>
				<section id="example-scenario">
					<h2>Example Form Scenario</h2>
					<p class="fragment"><i>I have created custom components that I would <br />
						like to act as form elements in my reactive form.</i></p>
					<ol>
						<li class="fragment">A typeahead component that displays one value to the user, <br />
							but passes an id as it's form value</li>
						<li class="fragment">A star rating component that passes a rating number as it's form value</li>
					</ol>
				</section>
				<section id="reactive-form-crash-course">
					<h2>Reactive Forms Crash Course</h2>
					<ul>
						<li class="fragment"><span class="block">Reactive Form:</span> a model-driven approach to handling form inputs whose values change over time. </li>
						<li class="fragment"><span class="block">Form Control:</span> basic form building block to create an input/radio/select/etc. <i>Tracks the value and validation status.</i></li>
						<li class="fragment"><span class="block">Form Group:</span> a group of form controls.</li>
						<li class="fragment"><span class="block">FormControlName:</span> directive that ties form element to a formControl.</li>
					</ul>
				</section>
				<section id="our-reactive-form">
					<p>Our Reactive Form</p>
					<img class="plain" src="img/reactive-form.png" />
				</section>
				<section id="form-markup">
					<img class="plain" src="img/reactive-form-html.png" />
				</section>
				<section id="meh-component-pt1">
					<p>Solution #1</p>
					<img class="plain" src="img/output-component.png" />
				</section>
				<section id="meh-component-pt2">
					<p>parent component w/ form</p>
					<img class="plain" src="img/output-parent.png" />
				</section>
				<section id="pitfalls">
					<h2>pitfalls</h2>
					<ul>
						<li class="fragment">Managing additional methods for listening to change events</li>
						<li class="fragment">Having to use additional method of .patchValue on form control</li>
						<li class="fragment">Validation?!?!?!</li>
					</ul>
				</section>
				<section id="cva-applied">
					<h2>Control Value Accessor Applied</h2>
				</section>
				<section id="cva-interface">
					<p>CVA Interface</p>
					<img class="plain" src="img/cva-interface.png" />
				</section>
				<section id="typescript-interface">
					<h2>Typescript with Classes & Interfaces</h2>
					<p class="fragment">Classes implementing interfaces <b>must</b> follow the structure described by the interface.</p>
				</section>
				<section id="writeValue">
					<p>write Value</p>
					<img class="plain" src="img/cva-write.png" />
					<p>Writes a new value to the element. This will be called when the FormControl is instantiated AND when patchValue or setValue is called.</p>
				</section>
				<section id="onChange">
					<p>register OnChange</p>
					<img class="plain" src="img/cva-change.png" />
					<p>Registers a callback function that is called when
					<br />the control's value changes in the UI.</p>
				</section>
				<section id="onTouched">
					<p>register OnTouched</p>
					<img class="plain" src="img/cva-touch.png" />
					<p>Registers a callback function is called by the forms
					<br />API on initialization to update the form model on blur.</p>
				</section>
				<section id="setDisabled">
					<p>set Disabled State</p>
					<img class="plain" src="img/cva-disabled.png" />
					<p>Function that is called by the forms API when the control status changes to or from 'DISABLED'. 
						This will be called when the FormControl is instantiated IF the disabled key is present AND when .enable() or .disable() is called.</p>
				</section>
				<section id="implementation">
					<h2>Implementation</h2>
					<p>We need to register the <b>NG_VALUE_ACCESSOR</b> provider and implement the <b>ControlValueAccessor</b> methods.</p>
				</section>
				<section id="NG_VALUE_ACCESSOR">
					<img class="plain" style="height:500px" src="img/NG_VALUE_ACCESSOR.png" />
					<p class="small">The NG_VALUE_ACCESSOR is used to register the component as a provider for the controlValueAccessor, and 
							because this will register the component early we'll need to use forwardRef to refer to it.</p>
				</section>
				<section id="basic-wrapper">
					<p>Basic CVA implementation</p>
					<img class="plain" style="height:600px" src="img/CVA.png" />
				</section>
				<section id="sweet-component-parent">
					<p>In form markup</p>
					<img class="plain" src="img/CVA-markup.png" />
					<div class="fragment">
						<p class="small">same as ...</p>
						<img class="plain" src="img/CVA-markup-alt.png" />
					</div>
				</section>
				<section id="back-to-og-problem">
					<h2>Back to Our Original Problem</h2>
					<p>Using CVA in practice for typeahead and rating form controls</p>
				</section>
				<section id="typeahead-demo">
					<img class="plain" src="img/typeahead-demo.gif" />
				</section>
				<section id="typeahead-data">
					<p>We want to display the 'name' value to our users and submit the 'id' value to our form</p>
					<img class="plain" src="img/typeahead-data.png" />
				</section>
				<section id="typeahead-component-markup">
					<p>Typeahead markup</p>
					<p class="small">(using <a href="https://valor-software.com/ngx-bootstrap/#/typeahead" target="_blank">ngx-bootstrap</a> typeahead)</p>
					<img class="plain" src="img/typeahead-html.png" />
				</section>
				<section id="typeahead-component">
					<p>Typeahead component</p>
					<img class="plain" style="height:600px" src="img/typeahead-ts.png" />
				</section>
				<section id="starrating-demo">
					<img class="plain" src="img/starrating-demo.gif" />
				</section>
				<section id="rating-component-html">
					<p>Star Rating Markup</p>
					<img class="plain" src="img/star-html.png" />
				</section>
				<section id="rating-component">
					<p>Star Rating Component</p>
					<img class="plain" style="height:600px" src="img/star-ts.png" />
				</section>
				<section id="testing">
					<h2>Testing our CVA Components</h2>
					<p>Things we care about:</p>
					<ul>
						<li class="fragment">Testing CVA methods communicate with formControl as expected</li>
						<li class="fragment">Testing setting/displaying values when formControl is initialized with value or gets it's value updated</li>
						<li class="fragment">Testing disabling/enabling of the CVA component</li>
						<li class="fragment">Testing interacting with the CVA component sets validation classes as expected.</li>
					</ul>
				</section>
				<section id="test-setup">
					<p>Test Setup - Creating a test host component & using ViewChild</p>
					<img class="plain" style="height:600px" src="img/typeahead-test-setup.png" />
				</section>
				<section id="typeahead-test-change">
					<p>Testing Typeahead Change Event</p>
					<img class="plain" src="img/typeahead-test-change.png" />
					<p>We care that the formControl is being notified of the change when an option is selected.</p>
				</section>
				<section id="typeahead-test-touch">
					<p>Testing Touch Event (& validation)</p>
					<img class="plain" src="img/typeahead-test-touch.png" />
					<p>We care that the formControl element is getting the ng-touched class and touched property true.</p>
				</section>
				<section id="typeahead-test-writevalue">
					<p>Testing setValue</p>
					<img class="plain" src="img/typeahead-test-writevalue.png" />
					<p>We care that the ui selects the appropriate dropdown when writeValue is called.</p>
				</section>
				<section id="rating-test-change">
					<p>Testing Rating Change Event</p>
					<img class="plain" src="img/rating-test-change.png" />
					<p>We care that the formControl is being notified of the change when a star is clicked.</p>
				</section>
				<section id="rating-test-disabled">
					<p>Testing Rating Disabling</p>
					<img class="plain" src="img/rating-test-disable.png" />
					<p>We care that component implements "disabled" functionality correctly.</p>
				</section>
				<section id="key-concepts">
					<h2>Key Concepts</h2>
					<ul>
						<li class="fragment">CVA is great for granular control of displaying
							<br /> to the UI &amp; communicating with the forms API</li>
						<li class="fragment">Keep your wrapper components dumb.</li>
						<li class="fragment">Just input and output form values!</li>
						<li class="fragment">Leave validation logic to the parent form component.</li>
						<li class="fragment">CVA can be used with any form API <br />- including template driven</li>
					</ul>
				</section>
				<!----------------------------------------->
				<section id="questions">
					<h2>Questions?</h2>
					<img style="height:300px" class="plain" src="img/headtilt.gif" alt="Corgi confused">
					<p>Slides available at: <a href="https://tehfedaykin.github.io/BetterAngularReactiveForms/" target="_blank">tehfedaykin.github.io/BetterAngularReactiveForms</a></p>
					<p>Galaxy Rating App: <a href="https://github.com/tehfedaykin/galaxy-rating-app" target="_blank">https://github.com/tehfedaykin/galaxy-rating-app</a></p>
					<p class="small">VS Code theme - <a href="https://marketplace.visualstudio.com/items?itemName=RobbOwen.synthwave-vscode">SynthWave '84 by Robb Owen</a></p>
				</section>
			</div>
		</div>
		<div class="twitter-overlay">
			<span>#ControlValueAccessor</span>
			<span>@likeOMGitsFEDAY</span> 
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				width: 1280,
				height: 800,
				history: true,
				display: 'block',
				progress: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});

		</script>
	</body>
</html>
